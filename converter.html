<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL 변환기 (GitHub+Netlify)</title>
    <style>
        body { font-family: sans-serif; padding: 15px; font-size: 14px; }
        label, input, button, textarea { display: block; margin-bottom: 10px; width: 95%; max-width: 600px; box-sizing: border-box; }
        input, textarea { padding: 8px; border: 1px solid #ccc; font-size: 14px; }
        button { padding: 10px 15px; cursor: pointer; background-color: #007bff; color: white; border: none; border-radius: 4px; font-size: 14px;}
        button:hover { background-color: #0056b3; }
        textarea { height: 80px; font-family: monospace; } /* Use monospace for URLs */
        #result { font-weight: bold; color: blue; margin-top: 5px;}
        .error { color: red; font-size: small;}
    </style>
</head>
<body>
    <h2>쿠팡 URL 변환기 (Netlify 리디렉션)</h2>

    <label for="coupangUrl">원본 쿠팡 URL:</label>
    <input type="url" id="coupangUrl" placeholder="https://link.coupang.com/a/..." required>

    <button onclick="generateUrl()">변환 URL 생성</button>

    <label for="transformedUrl">변환된 Netlify URL (복사해서 사용):</label>
    <textarea id="transformedUrl" readonly></textarea>
    <div id="message" class="error"></div>

    <script>
        function generateUrl() {
            const coupangUrlInput = document.getElementById('coupangUrl');
            const transformedUrlOutput = document.getElementById('transformedUrl');
            const messageDiv = document.getElementById('message');
            const coupangUrl = coupangUrlInput.value.trim();

            // ★★★ 본인의 Netlify 사이트 주소로 변경하세요! (반드시 '/'로 끝나도록) ★★★
            const netlifyRedirectorBaseUrl = 'https://your777-redirect.netlify.app/'; 

            messageDiv.textContent = ''; // Clear previous messages
            transformedUrlOutput.value = ''; // Clear previous output

            if (coupangUrl && (coupangUrl.startsWith('http://') || coupangUrl.startsWith('https://'))) {
                try {
                    const encodedCoupangUrl = encodeURIComponent(coupangUrl);
                    const finalTransformedUrl = `<span class="math-inline">\{netlifyRedirectorBaseUrl\}?target\=</span>{encodedCoupangUrl}`;
                    transformedUrlOutput.value = finalTransformedUrl;
                } catch (e) {
                    messageDiv.textContent = '오류: URL 인코딩 중 문제가 발생했습니다.';
                    console.error("Encoding error:", e);
                }
            } else {
                 messageDiv.textContent = '오류: 유효한 URL(http:// 또는 https:// 시작)을 입력하세요.';
            }
        }
    </script>
</body>
</html>